# 快速APK构建指南

由于Android开发环境安装较为复杂，这里提供几种快速获取APK的方案。

## 🚀 方案一：在线构建（推荐）

### GitHub Actions自动构建

1. **上传到GitHub**
   ```bash
   # 初始化Git仓库
   cd /Users/sean/Documents/aicode/哈友工具箱2.5.0/BypassApp
   git init
   git add .
   git commit -m "Initial commit"
   
   # 推送到GitHub（需要先创建仓库）
   git remote add origin https://github.com/yourusername/hayou-bypass.git
   git push -u origin main
   ```

2. **配置GitHub Actions**
   
   创建 `.github/workflows/build.yml`：
   ```yaml
   name: Build APK
   
   on:
     push:
       branches: [ main ]
     pull_request:
       branches: [ main ]
   
   jobs:
     build:
       runs-on: ubuntu-latest
   
       steps:
       - uses: actions/checkout@v3
   
       - name: Set up JDK 11
         uses: actions/setup-java@v3
         with:
           java-version: '11'
           distribution: 'temurin'
   
       - name: Setup Android SDK
         uses: android-actions/setup-android@v2
   
       - name: Cache Gradle packages
         uses: actions/cache@v3
         with:
           path: |
             ~/.gradle/caches
             ~/.gradle/wrapper
           key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
           restore-keys: |
             ${{ runner.os }}-gradle-
   
       - name: Grant execute permission for gradlew
         run: chmod +x gradlew
   
       - name: Build Debug APK
         run: ./gradlew assembleDebug
   
       - name: Upload APK
         uses: actions/upload-artifact@v3
         with:
           name: app-debug
           path: app/build/outputs/apk/debug/app-debug.apk
   ```

### 使用Gitpod在线IDE

1. **访问Gitpod**
   ```
   https://gitpod.io/#https://github.com/yourusername/hayou-bypass
   ```

2. **在线构建**
   ```bash
   # 在Gitpod终端中运行
   ./build_apk.sh debug
   ```

## 🛠️ 方案二：Docker构建

### 创建Docker构建环境

1. **创建Dockerfile**
   ```dockerfile
   FROM openjdk:11-jdk
   
   # 安装Android SDK
   ENV ANDROID_HOME /opt/android-sdk
   ENV PATH ${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools
   
   RUN mkdir -p ${ANDROID_HOME} && \
       cd ${ANDROID_HOME} && \
       wget https://dl.google.com/android/repository/commandlinetools-linux-9477386_latest.zip && \
       unzip commandlinetools-linux-9477386_latest.zip && \
       rm commandlinetools-linux-9477386_latest.zip
   
   ENV PATH ${PATH}:${ANDROID_HOME}/cmdline-tools/bin
   
   # 安装必要的SDK组件
   RUN yes | sdkmanager --sdk_root=${ANDROID_HOME} --licenses && \
       sdkmanager --sdk_root=${ANDROID_HOME} "platform-tools" "platforms;android-34" "build-tools;34.0.0"
   
   WORKDIR /app
   COPY . .
   
   RUN chmod +x ./gradlew
   
   CMD ["./gradlew", "assembleDebug"]
   ```

2. **构建Docker镜像**
   ```bash
   docker build -t hayou-bypass-builder .
   docker run -v $(pwd)/app/build/outputs:/output hayou-bypass-builder
   ```

## 📱 方案三：使用预编译APK

如果急需使用，可以先使用预编译的APK模板：

### 创建基础APK结构

```bash
# 创建最小化的APK项目
mkdir -p simple-bypass
cd simple-bypass

# 创建简化的build.gradle
cat > build.gradle << 'EOF'
apply plugin: 'com.android.application'

android {
    compileSdkVersion 34
    defaultConfig {
        applicationId "com.bypass.hayou.simple"
        minSdkVersion 21
        targetSdkVersion 34
        versionCode 1
        versionName "1.0"
    }
    buildTypes {
        debug {
            minifyEnabled false
        }
    }
}

dependencies {
    implementation 'androidx.appcompat:appcompat:1.6.1'
}
EOF
```

## 🔧 方案四：本地环境快速配置

### 最小化Android SDK安装

```bash
#!/bin/bash
# 快速SDK安装脚本

# 创建SDK目录
mkdir -p ~/android-sdk
cd ~/android-sdk

# 下载命令行工具
wget https://dl.google.com/android/repository/commandlinetools-mac-9477386_latest.zip
unzip commandlinetools-mac-9477386_latest.zip

# 设置环境变量
export ANDROID_HOME=~/android-sdk
export PATH=$PATH:$ANDROID_HOME/cmdline-tools/bin

# 安装必要组件
yes | sdkmanager --licenses
sdkmanager "platform-tools" "platforms;android-34" "build-tools;34.0.0"

echo "SDK安装完成，现在可以构建APK了"
```

## ⚡ 方案五：使用Termux（Android设备）

如果你有Android设备，可以直接在设备上构建：

1. **安装Termux**
   ```bash
   # 在Android设备上安装Termux应用
   # 然后在Termux中运行：
   
   pkg update
   pkg install openjdk-17 gradle
   
   # 克隆项目
   git clone /path/to/your/project
   cd project
   
   # 构建APK
   ./gradlew assembleDebug
   ```

## 📋 当前状态检查

让我们检查Android Studio的安装进度：

```bash
# 检查安装状态
ps aux | grep -i android

# 检查是否已安装
ls -la "/Applications/Android Studio.app"

# 检查SDK目录
ls -la ~/Library/Android/sdk
```

## 🎯 推荐流程

1. **立即可用**：使用GitHub Actions在线构建
2. **本地开发**：等待Android Studio安装完成
3. **快速测试**：使用Docker构建
4. **移动设备**：使用Termux直接构建

## 📞 获取帮助

如果遇到问题：

1. 检查 `环境安装指南.md` 获取详细说明
2. 运行 `./install_android_env.sh` 自动安装环境
3. 查看构建日志排查问题
4. 使用在线构建服务作为备选方案

---

**提示**：推荐使用GitHub Actions进行在线构建，这样无需本地安装复杂的开发环境，且构建速度快、成功率高。